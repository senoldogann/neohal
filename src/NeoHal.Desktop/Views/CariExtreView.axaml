<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:NeoHal.Desktop.ViewModels"
             xmlns:entities="using:NeoHal.Core.Entities"
             x:Class="NeoHal.Desktop.Views.CariExtreView"
             x:DataType="vm:CariExtreViewModel">
    
    <Grid RowDefinitions="Auto,Auto,*,Auto">
        
        <!-- BaÅŸlÄ±k Bar -->
        <Border Grid.Row="0" Background="{DynamicResource FaturaColor}" Padding="20,15">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel>
                    <TextBlock Text="ðŸ“Š CARÄ° HESAP EKSTRE" FontSize="24" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="BorÃ§-Alacak hareketleri gÃ¶rÃ¼ntÃ¼le" Foreground="#CE93D8" FontSize="13"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="15" VerticalAlignment="Center">
                    <Button Content="ðŸ”„ Yenile" Command="{Binding YenileCommand}" 
                            Background="#8E24AA" Foreground="White" Padding="15,8"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Filtre ve Cari SeÃ§imi -->
        <Border Grid.Row="1" Background="{DynamicResource BackgroundDarkBrush}" Padding="15">
            <Grid ColumnDefinitions="Auto,300,30,Auto,200,30,Auto,200,30,Auto,*">
                <TextBlock Text="Cari Hesap:" VerticalAlignment="Center" Foreground="#aaa"/>
                <ComboBox Grid.Column="1" 
                          ItemsSource="{Binding CariHesaplar}"
                          SelectedItem="{Binding SelectedCari}"
                          PlaceholderText="Cari seÃ§..."
                          IsTextSearchEnabled="True"
                          HorizontalAlignment="Stretch">
                    <ComboBox.ItemTemplate>
                        <DataTemplate x:DataType="entities:CariHesap">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="{Binding Kod}" Foreground="#888" Width="60"/>
                                <TextBlock Text="{Binding Unvan}"/>
                                <TextBlock Text="{Binding CariTipi}" Foreground="#7B1FA2" FontSize="10"/>
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                
                <TextBlock Grid.Column="3" Text="BaÅŸlangÄ±Ã§:" VerticalAlignment="Center" Foreground="#aaa"/>
                <DatePicker Grid.Column="4" SelectedDate="{Binding BaslangicTarihi}"/>
                
                <TextBlock Grid.Column="6" Text="BitiÅŸ:" VerticalAlignment="Center" Foreground="#aaa"/>
                <DatePicker Grid.Column="7" SelectedDate="{Binding BitisTarihi}"/>
                
                <Button Grid.Column="9" Content="ðŸ” GÃ¶ster" Command="{Binding LoadExtreCommand}"
                        Background="{DynamicResource FaturaColor}" Foreground="White" Padding="15,8"/>
                
                <Button Grid.Column="10" Content="Temizle" Command="{Binding FiltreTemizleCommand}"
                        Background="#333" Padding="10,8" HorizontalAlignment="Right"/>
            </Grid>
        </Border>
        
        <!-- Hareket Listesi -->
        <Border Grid.Row="2" Background="{DynamicResource BackgroundMediumBrush}" Padding="10">
            <DataGrid ItemsSource="{Binding Hareketler}"
                      AutoGenerateColumns="False"
                      CanUserResizeColumns="True"
                      GridLinesVisibility="Horizontal"
                      BorderThickness="1"
                      BorderBrush="#444"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      Background="{DynamicResource BackgroundMediumBrush}"
                      RowBackground="{DynamicResource BackgroundMediumBrush}">
                
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Tarih" Width="100" MinWidth="80" 
                                        Binding="{Binding Tarih, StringFormat=dd.MM.yyyy}"/>
                    <DataGridTextColumn Header="Hareket Tipi" Width="140" MinWidth="110" 
                                        Binding="{Binding HareketTipi}"/>
                    <DataGridTextColumn Header="AÃ§Ä±klama" Width="250" MinWidth="100" Binding="{Binding Aciklama}"/>
                    <DataGridTextColumn Header="Belge Tipi" Width="100" MinWidth="80" Binding="{Binding ReferansBelgeTipi}"/>
                    <DataGridTextColumn Header="Tutar" Width="120" MinWidth="80" 
                                        Binding="{Binding Tutar, StringFormat=N2}"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
        
        <!-- Alt Ã–zet -->
        <Border Grid.Row="3" Background="{DynamicResource BackgroundMediumBrush}" Padding="15">
            <Grid ColumnDefinitions="*,Auto">
                <TextBlock Text="{Binding StatusMessage}" Foreground="#888" VerticalAlignment="Center"/>
                
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="30">
                    <Border Background="#333" CornerRadius="5" Padding="20,10">
                        <StackPanel>
                            <TextBlock Text="TOPLAM BORÃ‡" Foreground="#888" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ToplamBorc, StringFormat=N2}" 
                                           FontSize="20" FontWeight="Bold" Foreground="#F44336"/>
                                <TextBlock Text=" â‚º" FontSize="12" Foreground="#F44336" 
                                           VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <Border Background="#333" CornerRadius="5" Padding="20,10">
                        <StackPanel>
                            <TextBlock Text="TOPLAM ALACAK" Foreground="#888" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ToplamAlacak, StringFormat=N2}" 
                                           FontSize="20" FontWeight="Bold" Foreground="#4CAF50"/>
                                <TextBlock Text=" â‚º" FontSize="12" Foreground="#4CAF50" 
                                           VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <Border Background="{DynamicResource FaturaColor}" CornerRadius="5" Padding="20,10">
                        <StackPanel>
                            <TextBlock Text="{Binding BakiyeDurumu}" Foreground="#CE93D8" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding Bakiye, StringFormat=N2}" 
                                           FontSize="20" FontWeight="Bold" Foreground="White"/>
                                <TextBlock Text=" â‚º" FontSize="12" Foreground="White" 
                                           VerticalAlignment="Bottom" Margin="0,0,0,3"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>

<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:NeoHal.Desktop.ViewModels"
             xmlns:m="using:NeoHal.Core.Entities"
             xmlns:conv="using:NeoHal.Desktop.Converters"
             x:Class="NeoHal.Desktop.Views.HizliSatisView"
             x:DataType="vm:HizliSatisViewModel"
             Name="HizliSatisRoot">
    
    <UserControl.Resources>
        <conv:DecimalToStringConverter x:Key="DecimalConverter"/>
        <conv:IntToStringConverter x:Key="IntConverter"/>
    </UserControl.Resources>
    
    <Grid RowDefinitions="Auto,Auto,*,Auto">
        
        <!-- Ãœst Bar: AlÄ±cÄ± SeÃ§imi ve Fatura Bilgisi -->
        <Border Grid.Row="0" Background="{DynamicResource BackgroundMediumBrush}" Padding="15">
            <Grid ColumnDefinitions="Auto,Auto,Auto,*,Auto">
                <StackPanel Grid.Column="0" Margin="0,0,20,0">
                    <TextBlock Text="AlÄ±cÄ± (F1 ile ara)" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="11"/>
                    <ComboBox Name="AliciComboBox"
                              ItemsSource="{Binding Cariler}"
                              Width="350"
                              PlaceholderText="AlÄ±cÄ± seÃ§... (F1)"
                              SelectedItem="{Binding SelectedAlici}"
                              IsTextSearchEnabled="True">
                        <ComboBox.ItemTemplate>
                            <DataTemplate x:DataType="m:CariHesap">
                                <StackPanel Orientation="Horizontal" Spacing="10">
                                    <TextBlock Text="{Binding Kod}" Foreground="{DynamicResource SuccessBrush}" Width="80" FontWeight="Bold"/>
                                    <TextBlock Text="{Binding Unvan}" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    <TextBlock Text="{Binding CariTipiDetay}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="11"/>
                                </StackPanel>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Margin="0,0,20,0">
                    <TextBlock Text="Fatura No" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="11"/>
                    <TextBox Text="{Binding FaturaNo}" Width="150" IsReadOnly="True" Background="White" Foreground="Black"/>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Margin="0,0,20,0">
                    <TextBlock Text="Tarih" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="11"/>
                    <DatePicker SelectedDate="{Binding FaturaTarihi}" Width="150"/>
                </StackPanel>
                
                <!-- BoÅŸluk -->
                <Panel Grid.Column="3"/>
                
                <!-- Genel Toplam -->
                <Border Grid.Column="4" Background="{DynamicResource InfoBrush}" CornerRadius="8" Padding="20,10">
                    <StackPanel>
                        <TextBlock Text="GENEL TOPLAM" Foreground="White" FontSize="10" Opacity="0.8"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="â‚º" FontSize="24" FontWeight="Bold" Foreground="White"/>
                            <TextBlock Text="{Binding GenelToplam, StringFormat=N2}" 
                                       FontSize="24" FontWeight="Bold" Foreground="White"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
        
        <!-- KÄ±sayol Bilgisi (MacBook uyumlu) -->
        <Border Grid.Row="1" Background="{DynamicResource BackgroundLightBrush}" Padding="10,5">
            <StackPanel Orientation="Horizontal" Spacing="15">
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="TAB" Foreground="{DynamicResource SuccessBrush}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="Sonraki SÃ¼tun" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="ENTER" Foreground="{DynamicResource SuccessBrush}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="SatÄ±r Kaydet + Yeni" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="âŒ˜1" Foreground="{DynamicResource InfoBrush}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="AlÄ±cÄ±" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="âŒ˜2" Foreground="{DynamicResource KullaniciColor}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="ÃœrÃ¼n Listesi" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="âŒ˜3" Foreground="{DynamicResource KullaniciColor}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="Kap Listesi" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="âŒ˜5" Foreground="{DynamicResource TahsilatColor}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="Lot SeÃ§" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="âŒ˜S" Foreground="{DynamicResource WarningBrush}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="Fatura OluÅŸtur" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
                <Border Background="White" CornerRadius="3" Padding="6,2" BorderBrush="#E0E0E0" BorderThickness="1">
                    <StackPanel Orientation="Horizontal" Spacing="5">
                        <TextBlock Text="ESC" Foreground="{DynamicResource ErrorBrush}" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="Ä°ptal" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
        
        <!-- Ana Grid: Excel TarzÄ± GiriÅŸ AlanÄ± -->
        <Border Grid.Row="2" Background="White" Margin="10">
            <Grid RowDefinitions="Auto,*">
                <!-- SÃ¼tun BaÅŸlÄ±klarÄ± -->
                <Border Grid.Row="0" Background="{DynamicResource BackgroundMediumBrush}" Padding="5" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1">
                    <Grid ColumnDefinitions="200,130,80,100,100,100,100,110,110,45">
                        <TextBlock Grid.Column="0" Text="ÃœRÃœN (F2)" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}" Padding="8,5"/>
                        <TextBlock Grid.Column="1" Text="KAP (F3)" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}" Padding="8,5"/>
                        <TextBlock Grid.Column="2" Text="ADET" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}" Padding="8,5" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="3" Text="BRÃœT (kg)" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}" Padding="8,5" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="4" Text="DARA" FontWeight="Bold" Foreground="{DynamicResource TextSecondaryBrush}" Padding="8,5" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="5" Text="NET (kg)" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}" Padding="8,5" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="6" Text="FÄ°YAT" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}" Padding="8,5" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="7" Text="TUTAR (â‚º)" FontWeight="Bold" Foreground="{DynamicResource WarningBrush}" Padding="8,5" HorizontalAlignment="Center"/>
                        <TextBlock Grid.Column="8" Text="LOT" FontWeight="Bold" Foreground="{DynamicResource InfoBrush}" Padding="8,5"/>
                        <TextBlock Grid.Column="9" Text="" Padding="5"/>
                    </Grid>
                </Border>
                
                <!-- SatÄ±rlar -->
                <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Kalemler}" Name="KalemlerList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate DataType="{x:Type vm:HizliSatisKalem}">
                                <Border Background="White" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="5,2">
                                    <Grid ColumnDefinitions="200,130,80,100,100,100,100,110,110,45">
                                        
                                        <!-- ÃœRÃœN - AutoCompleteBox -->
                                        <AutoCompleteBox Grid.Column="0"
                                                         ItemsSource="{Binding #HizliSatisRoot.((vm:HizliSatisViewModel)DataContext).Urunler}"
                                                         FilterMode="ContainsOrdinal"
                                                         MinimumPrefixLength="0"
                                                         Watermark="PAT, BIB..."
                                                         SelectedItem="{Binding Urun}"
                                                         ValueMemberBinding="{Binding Ad}"
                                                         Margin="2">
                                            <AutoCompleteBox.ItemTemplate>
                                                <DataTemplate x:DataType="m:Urun">
                                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                                        <TextBlock Text="{Binding Kod}" Foreground="{DynamicResource SuccessBrush}" Width="50" FontWeight="Bold"/>
                                                        <TextBlock Text="{Binding Ad}" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </AutoCompleteBox.ItemTemplate>
                                        </AutoCompleteBox>
                                        
                                        <!-- KAP TÄ°PÄ° - AutoCompleteBox -->
                                        <AutoCompleteBox Grid.Column="1"
                                                         ItemsSource="{Binding #HizliSatisRoot.((vm:HizliSatisViewModel)DataContext).KapTipleri}"
                                                         FilterMode="ContainsOrdinal"
                                                         MinimumPrefixLength="0"
                                                         Watermark="KÃœÃ‡, PLA..."
                                                         SelectedItem="{Binding KapTipi}"
                                                         ValueMemberBinding="{Binding Ad}"
                                                         Margin="2">
                                            <AutoCompleteBox.ItemTemplate>
                                                <DataTemplate x:DataType="m:KapTipi">
                                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                                        <TextBlock Text="{Binding Kod}" Foreground="{DynamicResource WarningBrush}" Width="40"/>
                                                        <TextBlock Text="{Binding Ad}" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                                        <TextBlock Text="{Binding DaraAgirlik, StringFormat={}{0} kg}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </AutoCompleteBox.ItemTemplate>
                                        </AutoCompleteBox>
                                        
                                        <!-- KAP ADET -->
                                        <NumericUpDown Grid.Column="2" 
                                                 Value="{Binding KapAdet}" 
                                                 Minimum="0"
                                                 Maximum="9999"
                                                 FormatString="0"
                                                 ShowButtonSpinner="False"
                                                 HorizontalContentAlignment="Center"
                                                 Margin="2"/>
                                        
                                        <!-- BRÃœT KG -->
                                        <NumericUpDown Grid.Column="3" 
                                                 Value="{Binding BrutKg}" 
                                                 Minimum="0"
                                                 Maximum="999999"
                                                 FormatString="N2"
                                                 Increment="0.5"
                                                 ShowButtonSpinner="False"
                                                 HorizontalContentAlignment="Right"
                                                 Margin="2"/>
                                        
                                        <!-- DARA (Readonly) -->
                                        <TextBox Grid.Column="4" 
                                                 Text="{Binding DaraKg, Converter={StaticResource DecimalConverter}}" 
                                                 IsReadOnly="True"
                                                 Background="{DynamicResource BackgroundLightBrush}"
                                                 Foreground="{DynamicResource TextSecondaryBrush}"
                                                 HorizontalContentAlignment="Right"
                                                 Margin="2"/>
                                        
                                        <!-- NET KG (Readonly) -->
                                        <TextBox Grid.Column="5" 
                                                 Text="{Binding NetKg, Converter={StaticResource DecimalConverter}}" 
                                                 IsReadOnly="True"
                                                 Background="{DynamicResource BackgroundLightBrush}"
                                                 Foreground="{DynamicResource SuccessBrush}"
                                                 FontWeight="Bold"
                                                 HorizontalContentAlignment="Right"
                                                 Margin="2"/>
                                        
                                        <!-- BÄ°RÄ°M FÄ°YAT -->
                                        <NumericUpDown Grid.Column="6" 
                                                 Name="FiyatInput"
                                                 Value="{Binding BirimFiyat}" 
                                                 Minimum="0"
                                                 Maximum="999999"
                                                 FormatString="N2"
                                                 Increment="0.1"
                                                 ShowButtonSpinner="False"
                                                 HorizontalContentAlignment="Right"
                                                 Margin="2"/>
                                        
                                        <!-- TUTAR (Readonly) -->
                                        <TextBox Grid.Column="7" 
                                                 Text="{Binding Tutar, Converter={StaticResource DecimalConverter}}" 
                                                 IsReadOnly="True"
                                                 Background="{DynamicResource BackgroundLightBrush}"
                                                 Foreground="{DynamicResource WarningBrush}"
                                                 FontWeight="Bold"
                                                 HorizontalContentAlignment="Right"
                                                 Margin="2"/>
                                        
                                        <!-- LOT NO -->
                                        <Grid Grid.Column="8" Margin="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0" 
                                                     Text="{Binding LotNo}" 
                                                     Foreground="{DynamicResource InfoBrush}"/>
                                            <Button Grid.Column="1" 
                                                    Content="..." 
                                                    Width="25"
                                                    Command="{Binding #HizliSatisRoot.((vm:HizliSatisViewModel)DataContext).LotSecCommand}"
                                                    CommandParameter="{Binding}"/>
                                        </Grid>
                                        
                                        <!-- SÄ°L -->
                                        <Button Grid.Column="9" 
                                                Content="âœ•" 
                                                Foreground="{DynamicResource ErrorBrush}"
                                                Background="Transparent"
                                                Command="{Binding #HizliSatisRoot.((vm:HizliSatisViewModel)DataContext).SatirSilCommand}"
                                                CommandParameter="{Binding}"
                                                HorizontalAlignment="Center"
                                                Margin="2"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Border>
        
        <!-- Alt Bar: Toplamlar ve Aksiyonlar -->
        <Border Grid.Row="3" Background="{DynamicResource BackgroundMediumBrush}" Padding="15">
            <Grid ColumnDefinitions="*,Auto">
                <!-- Toplamlar -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="30">
                    <Border Background="White" CornerRadius="5" Padding="15,10" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="TOPLAM KAP" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                            <TextBlock Text="{Binding ToplamKap}" FontSize="24" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                        </StackPanel>
                    </Border>
                    <Border Background="White" CornerRadius="5" Padding="15,10" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="TOPLAM KG" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ToplamKg, StringFormat=N2}" FontSize="24" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}"/>
                                <TextBlock Text=" kg" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Bottom" Margin="0,0,0,4"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <Border Background="White" CornerRadius="5" Padding="15,10" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="ARA TOPLAM" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="â‚º" FontSize="18" VerticalAlignment="Bottom" Margin="0,0,2,4" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                <TextBlock Text="{Binding AraToplam, StringFormat=N2}" FontSize="24" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <Border Background="White" CornerRadius="5" Padding="15,10" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="KDV (%1)" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="â‚º" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Bottom" Margin="0,0,2,2"/>
                                <TextBlock Text="{Binding ToplamKdv, StringFormat=N2}" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    <Border Background="White" CornerRadius="5" Padding="15,10" BorderBrush="#E0E0E0" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="RÃœSUM (%1)" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="10"/>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="â‚º" FontSize="12" Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Bottom" Margin="0,0,2,2"/>
                                <TextBlock Text="{Binding ToplamRusum, StringFormat=N2}" FontSize="18" Foreground="{DynamicResource TextSecondaryBrush}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- Aksiyonlar -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10">
                    <Button Content="âž• Yeni SatÄ±r" 
                            Command="{Binding YeniSatirCommand}"
                            Background="White"
                            Foreground="{DynamicResource TextPrimaryBrush}"
                            BorderBrush="#E0E0E0"
                            BorderThickness="1"
                            Padding="15,10"/>
                    <Button Content="Ä°ptal (ESC)" 
                            Command="{Binding IptalCommand}"
                            Background="{DynamicResource BackgroundMediumBrush}"
                            Foreground="{DynamicResource TextPrimaryBrush}"
                            Padding="15,10"/>
                    <Button Content="Taslak Kaydet" 
                            Command="{Binding TaslakKaydetCommand}"
                            Background="{DynamicResource WarningBrush}"
                            Foreground="White"
                            Padding="15,10"/>
                    <Button Content="âœ“ Fatura OluÅŸtur (F9)" 
                            Command="{Binding FaturaOlusturCommand}"
                            Background="{DynamicResource SuccessBrush}"
                            Foreground="White"
                            FontWeight="Bold"
                            Padding="25,10"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- LOT SEÃ‡Ä°M DIALOG -->
        <Border Grid.RowSpan="4" 
                Background="#80000000" 
                IsVisible="{Binding LotSecimDialogAcik}">
            <Border Background="White" 
                    CornerRadius="10" 
                    Width="700" 
                    Height="500"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Padding="20">
                <Grid RowDefinitions="Auto,*,Auto">
                    <!-- Header -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,15">
                        <TextBlock Text="ðŸ“¦ LOT SEÃ‡Ä°MÄ° (FIFO)" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource SuccessBrush}"/>
                        <TextBlock Text="{Binding LotSecimKalem.Urun.Ad, FallbackValue='ÃœrÃ¼n seÃ§ilmedi'}" 
                                   FontSize="14" Foreground="{DynamicResource TextSecondaryBrush}"/>
                    </StackPanel>
                    
                    <!-- Lot Listesi -->
                    <DataGrid Grid.Row="1" 
                              ItemsSource="{Binding MevcutLotlar}"
                              SelectedItem="{Binding SelectedLot}"
                              AutoGenerateColumns="False"
                              CanUserSortColumns="True"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              BorderBrush="#E0E0E0"
                              BorderThickness="1">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ä°rsaliye No" Binding="{Binding IrsaliyeNo}" Width="120"/>
                            <DataGridTextColumn Header="Tarih" Binding="{Binding IrsaliyeTarihi, StringFormat=dd.MM.yyyy}" Width="90"/>
                            <DataGridTextColumn Header="MÃ¼stahsil" Binding="{Binding MustahsilAdi}" Width="160"/>
                            <DataGridTextColumn Header="Kalan (kg)" Binding="{Binding KalanKg, StringFormat=N1}" Width="100"/>
                            <DataGridTextColumn Header="Kap" Binding="{Binding KalanKap}" Width="60"/>
                            <DataGridTextColumn Header="Kap Tipi" Binding="{Binding KapTipiAdi}" Width="80"/>
                            <DataGridTextColumn Header="Fiyat" Binding="{Binding BirimFiyat, StringFormat=â‚º{0:N2}}" Width="90"/>
                        </DataGrid.Columns>
                    </DataGrid>
                    
                    <!-- Butonlar -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,15,0,0">
                        <Button Content="Ä°ptal" 
                                Command="{Binding LotSecimIptalCommand}"
                                Padding="20,10"/>
                        <Button Content="âœ“ SeÃ§" 
                                Command="{Binding LotSecimOnaylaCommand}"
                                Background="{DynamicResource SuccessBrush}"
                                Foreground="White"
                                FontWeight="Bold"
                                Padding="30,10"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Border>
    </Grid>
</UserControl>
